load("@io_bazel_rules_kotlin//kotlin:kotlin.bzl", "kt_jvm_test")
load("//src/main/kotlin/org/wfanet/measurement/db/gcp/testing:macros.bzl", "spanner_emulator_test")

kt_jvm_test(
    name = "filters_test",
    srcs = ["FiltersTest.kt"],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.FiltersTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlin/test",
        "//src/main/kotlin/org/wfanet/measurement/common",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
    ],
)

spanner_emulator_test(
    name = "kingdom_schema_test",
    srcs = ["KingdomSchemaTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.KingdomSchemaTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/org/junit",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "associate_requisition_and_report_transaction_test",
    srcs = ["AssociateRequisitionAndReportTransactionTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.AssociateRequisitionAndReportTransactionTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlin/test",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "create_requisition_transaction_test",
    srcs = ["CreateRequisitionTransactionTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.CreateRequisitionTransactionTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlin/test",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "confirm_duchy_readiness_transaction_test",
    srcs = ["ConfirmDuchyReadinessTransactionTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.ConfirmDuchyReadinessTransactionTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlin/test",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/common/identity/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "create_report_log_entry_transaction_test",
    srcs = ["CreateReportLogEntryTransactionTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.CreateReportLogEntryTransactionTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlin/test",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "fulfill_requisition_transaction_test",
    srcs = ["FulfillRequisitionTransactionTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.FulfillRequisitionTransactionTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlin/test",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "get_report_query_test",
    srcs = ["GetReportQueryTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.GetReportQueryTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlin/test",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "read_requisition_templates_query_test",
    srcs = ["ReadRequisitionTemplatesQueryTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.ReadRequisitionTemplatesQueryTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlinx/coroutines:core",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "stream_requisitions_query_test",
    srcs = ["StreamRequisitionsQueryTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.StreamRequisitionsQueryTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlinx/coroutines:core",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "create_next_report_transaction_test",
    srcs = ["CreateNextReportTransactionTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.CreateNextReportTransactionTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlinx/coroutines:core",
        "//src/main/kotlin/org/wfanet/measurement/common/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "stream_reports_query_test",
    srcs = ["StreamReportsQueryTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.StreamReportsQueryTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlinx/coroutines:core",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "stream_ready_reports_query_test",
    srcs = ["StreamReadyReportsQueryTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.StreamReadyReportsQueryTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlinx/coroutines:core",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "stream_ready_schedules_query_test",
    srcs = ["StreamReadySchedulesQueryTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.StreamReadySchedulesQueryTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlinx/coroutines:core",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)

spanner_emulator_test(
    name = "update_report_state_transaction_test",
    srcs = ["UpdateReportStateTransactionTest.kt"],
    resources = [
        "//src/main/db/gcp:kingdom_schema",
    ],
    test_class = "org.wfanet.measurement.db.kingdom.gcp.UpdateReportStateTransactionTest",
    deps = [
        "//imports/java/com/google/cloud/spanner",
        "//imports/java/com/google/common/truth",
        "//imports/java/com/google/common/truth/extensions/proto",
        "//imports/java/org/junit",
        "//imports/kotlin/kotlin/test",
        "//src/main/kotlin/org/wfanet/measurement/db/gcp/testing",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp",
        "//src/main/kotlin/org/wfanet/measurement/db/kingdom/gcp/testing",
    ],
)
